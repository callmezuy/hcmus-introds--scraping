Guideline: Data Scraping Pipeline cho arXiv Lab
1. Tổng Quan Hệ Thống
Hệ thống được thiết kế theo kiến trúc Parallel Pipeline (xử lý song song) gồm 3 giai đoạn chính, tối ưu hóa thời gian chạy bằng Multi-threading và xử lý dữ liệu theo Batch.

Luồng xử lý (Workflow):
Initialization: Đọc file CSV, xác định Student ID, sinh danh sách các arXiv ID cần thu thập.

Entry Discovery: Thu thập Metadata (Title, Authors, Dates...) thông qua arXiv API (Batch Processing).

Full-text Download: Tải toàn bộ source code gốc (TeX/PDF) của tất cả các phiên bản (v1, v2,...) cho từng bài báo.

Reference Extraction: Truy vấn Semantic Scholar API để lấy danh sách tài liệu tham khảo và map ngược lại arXiv ID.

2. Chi Tiết Kỹ Thuật Từng Bước
Bước 0: Chuẩn Bị Dữ Liệu (ID Generation)
Input: File TCTA-DS1.csv.

Logic:

Tìm dòng chứa MSSV của sinh viên.

Xác định start_month, start_id, end_month, end_id.

Sinh danh sách ID theo định dạng chuẩn arXiv: YYMM.NNNNN (Ví dụ: 2404.15198).

Lưu ý: Cần xử lý trường hợp range ID vắt qua 2 tháng khác nhau (nếu có).

Bước 1: Entry Discovery (Metadata Scraping)

Công cụ: Thư viện arxiv (Python wrapper cho arXiv API).


Chiến lược:

Không gọi API cho từng bài lẻ (rất chậm).

Gom nhóm ID thành các Batch (Chunk), kích thước BATCH_SIZE = 100.

Dùng arxiv.Search(id_list=...) để lấy thông tin một lần cho 100 bài.


Output: File metadata.json lưu trong thư mục của từng bài báo.

Chứa: Title, Authors, Submission Date, Revised Dates, Venue.

Bước 2: Full-text Source Download

Công cụ: Thư viện requests (để tải file .tar.gz).

Chiến lược: Multi-threading (Đa luồng).

Do việc tải file bị giới hạn bởi băng thông mạng (I/O bound), sử dụng ThreadPoolExecutor để tải song song nhiều bài cùng lúc.

Vòng lặp phiên bản: Với mỗi bài, bắt đầu thử tải v1. Nếu thành công -> thử tiếp v2. Lặp lại cho đến khi gặp lỗi (404/403) -> Dừng.


Cấu trúc thư mục bắt buộc :

Plaintext

<MSSV>/
└── <YYMM-ID>/           (Ví dụ: 2404-15198)
    ├── metadata.json
    ├── references.json
    └── tex/
        ├── <YYMM-ID>v1/
        │   └── <YYMM-ID>v1.tar.gz
        └── <YYMM-ID>v2/ ...

Lưu ý quan trọng: Xóa các file hình ảnh (jpg, png...) trong source để giảm dung lượng (theo yêu cầu đề bài ).

Bước 3: Fetch References

Công cụ: Semantic Scholar API.


Endpoint: https://api.semanticscholar.org/graph/v1/paper/arXiv:{id}.

Chiến lược:

Tích hợp vào luồng song song của Bước 2 nhưng phải có Rate Limiter.

Giới hạn: 1 request/giây (hoặc chậm hơn để an toàn) để tránh lỗi HTTP 429 .

Nếu gặp lỗi 429: Tạm dừng (sleep) 60 giây rồi thử lại.


Output: File references.json chứa danh sách bài tham khảo có arXiv ID.